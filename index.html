<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Kamodo Analysis Suite</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="css/ansi-colours.css" rel="stylesheet" />
  <link href="css/jupyter-cells.css" rel="stylesheet" />
  <link href="css/pandas-dataframe.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Home";
    var mkdocs_page_input_path = "README.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> Kamodo Analysis Suite</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href=".">Home</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting started</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#kamodo-environment">Kamodo Environment</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#create-kamodo-environment">Create Kamodo environment</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#loading-example-notebooks">Loading example notebooks</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#test-suite">Test Suite</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#generating-docs">Generating Docs</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="about/">About</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="notebooks/Kamodo/">Introduction</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="notebooks/Visualization/">Visualization</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="notebooks/Syntax/">Syntax</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="notebooks/Kamodofying_Models/">Kamodofying Models</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="notebooks/FieldIntegration/">Field Integration</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="API/">API</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING/">Contributing</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="additional_resources/">Additional Resources</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">Kamodo Analysis Suite</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Home</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="kamodo">Kamodo<a class="headerlink" href="#kamodo" title="Permanent link">&para;</a></h1>
<p><a href="https://codecov.io/gh/asherp/Kamodo"><img alt="codecov" src="https://codecov.io/gh/asherp/Kamodo/branch/master/graph/badge.svg?token=W1B3L19REF" /></a></p>
<p>Kamodo is a CCMC tool for access, interpolation, and visualization of space weather models and data in python. Kamodo allows model developers to represent simulation results as mathematical functions which may be manipulated directly by end users. Kamodo handles unit conversion transparently and supports interactive science discovery through jupyter notebooks with minimal coding and is accessible through python.</p>
<p>The project page is located at the Community Coordinated Modeling Center, located at NASA Goddard Space Flight Center.</p>
<ul>
<li>Official site page <a href="https://ccmc.gsfc.nasa.gov/Kamodo/">https://ccmc.gsfc.nasa.gov/Kamodo/</a></li>
</ul>
<p>Kamodo's official source code is hosted on github under a permissive NASA open source license:</p>
<ul>
<li><a href="https://github.com/nasa/Kamodo">https://github.com/nasa/Kamodo</a></li>
</ul>
<p>Periodic contributions to Kamodo are made from the unofficial repo located here</p>
<ul>
<li><a href="https://github.com/asherp/Kamodo">https://github.com/asherp/Kamodo</a></li>
</ul>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<p>Suppose we have a vector field defined by a function of positions in the x-y plane:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">kamodo</span> <span class="kn">import</span> <span class="n">kamodofy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">xx</span><span class="p">,</span> <span class="n">yy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">xx</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">yy</span><span class="o">.</span><span class="n">ravel</span><span class="p">())))</span>

<span class="nd">@kamodofy</span><span class="p">(</span><span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;km/s&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fvec</span><span class="p">(</span><span class="n">rvec</span> <span class="o">=</span> <span class="n">points</span><span class="p">):</span>
    <span class="n">ux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rvec</span><span class="p">[:,</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">uy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rvec</span><span class="p">[:,</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">ux</span><span class="p">,</span><span class="n">uy</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
</code></pre></div>

<p>The @kamodofy decorator lets us register this field with units to enable unit-conversion downstream:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">kamodo</span> <span class="kn">import</span> <span class="n">Kamodo</span>

<span class="n">kamodo</span> <span class="o">=</span> <span class="n">Kamodo</span><span class="p">(</span><span class="n">fvec</span> <span class="o">=</span> <span class="n">fvec</span><span class="p">)</span>
<span class="n">kamodo</span>
</code></pre></div>

<p>When run in a jupyter notebook, the above kamodo object will render as a set of equations:</p>
<div class="arithmatex">\[\vec{f}{\left (\vec{r} \right )} [km/s] = \lambda{\left (\vec{r} \right )}\]</div>
<p>We can now evaluate our function using dot notation:</p>
<div class="codehilite"><pre><span></span><code><span class="n">kamodo</span><span class="o">.</span><span class="n">fvec</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]]))</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="go">array([[-0.84147098,  0.54030231]])</span>
</code></pre></div>

<p>We can perform unit conversion by function composition:</p>
<div class="codehilite"><pre><span></span><code><span class="n">kamodo</span><span class="p">[</span><span class="s1">&#39;gvec[m/s]&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;fvec&#39;</span>
</code></pre></div>

<p>kamodo automatically generates the appropriate multiplicative factors:
<span class="arithmatex">\(<span class="arithmatex">\(\vec{g}{\left (\vec{r} \right )} [m/s] = 1000 \vec{f}{\left (\vec{r} \right )}\)</span>\)</span>
we can verify these results through evaluation</p>
<div class="codehilite"><pre><span></span><code><span class="n">kamodo</span><span class="o">.</span><span class="n">gvec</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]]))</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="go">array([[-841.47098481,  540.30230587]])</span>
</code></pre></div>

<p>Kamodo also generates quick-look graphics via function inspection.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">plotly.io</span> <span class="k">as</span> <span class="nn">pio</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">kamodo</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;fvec&#39;</span><span class="p">)</span>
<span class="n">pio</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s1">&#39;images/fig2d-usage.svg&#39;</span><span class="p">)</span>
</code></pre></div>

<p><img alt="usage" src="https://raw.githubusercontent.com/EnsembleGovServices/kamodo-core/joss/docs/notebooks/images/fig2d-usage.svg" /></p>
<p>Head over to the <a href="notebooks/Kamodo/">Introduction</a> page for more details.</p>
<h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>Kamodo may be installed from pip</p>
<div class="codehilite"><pre><span></span><code><span class="go">pip install kamodo</span>
</code></pre></div>

<p>Kamodo is now maintained by Ensemble Government Services. To get the latest version, install from the Ensemble git repo:</p>
<div class="codehilite"><pre><span></span><code><span class="go">pip install git+https://github.com/EnsembleGovServices/kamodo-core.git</span>
</code></pre></div>

<h3 id="kamodo-environment">Kamodo Environment<a class="headerlink" href="#kamodo-environment" title="Permanent link">&para;</a></h3>
<p>We strongly recommend using the conda environment system to avoid library conflicts with your host machine's python.</p>
<p>Download and install miniconda from <a href="https://conda.io/miniconda.html">here</a>. The advantage to using miniconda is that each new environment includes the bare-minimum for a project. This allows you to keep many different projects on a single work station.</p>
<h4 id="create-kamodo-environment">Create Kamodo environment<a class="headerlink" href="#create-kamodo-environment" title="Permanent link">&para;</a></h4>
<p>Create a new environment for kamodo</p>
<div class="codehilite"><pre><span></span><code><span class="go">conda create -n kamodo python=3.7</span>
<span class="go">conda activate kamodo</span>
<span class="gp gp-VirtualEnv">(kamodo)</span> <span class="go">pip install kamodo</span>
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The leading (kamodo) in your prompt indicates that you have activated the <code>kamodo</code> environment.
From here on, anything you install will be isolated to the <code>kamodo</code> environment.</p>
</div>
<h4 id="loading-example-notebooks">Loading example notebooks<a class="headerlink" href="#loading-example-notebooks" title="Permanent link">&para;</a></h4>
<p>If you want to run any of the notebooks in docs, you will need to install <code>jupyter</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="gp gp-VirtualEnv">(kamodo)</span> <span class="go">conda install jupyter</span>
</code></pre></div>

<p>Navigate to the top-level of the kamodo repo, then point jupyter to <code>docs/notebooks</code>:</p>
<div class="highlight"><pre><span></span><code>(kamodo) jupyter notebook docs/notebooks
</code></pre></div>
<p>This should open a browser window that will allow you to load any of the example notebooks.</p>
<h4 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h4>
<p>The following (minimum) requirements are obtained by running <code>pip install kamodo</code></p>
<ul>
<li>decorator&gt;=4.4.2</li>
<li>numpy</li>
<li>scipy</li>
<li>sympy==1.5.1</li>
<li>pandas</li>
<li>plotly</li>
<li>pytest</li>
<li>hydra-core==0.11.3</li>
<li>Flask==1.1.2</li>
<li>flask-cors</li>
<li>flask-restful==0.3.8</li>
<li>antlr4-python3-runtime==4.7</li>
<li>python-forge</li>
<li>requests</li>
<li>incremental</li>
</ul>
<p>The antlr package may be necessary for rendering latex rendering in a notebook</p>
<div class="codehilite"><pre><span></span><code>conda install antlr-python-runtime
</code></pre></div>

<p>Plotly-orca may be needed for proper image export</p>
<div class="codehilite"><pre><span></span><code>conda install -c plotly plotly-orca <span class="o">(</span><span class="k">for</span> writing images<span class="o">)</span>
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>plotly version in flux</p>
</div>
<h2 id="test-suite">Test Suite<a class="headerlink" href="#test-suite" title="Permanent link">&para;</a></h2>
<p>Kamodo's unit tests are run with <a href="https://docs.pytest.org/en/7.0.x/">pytest</a>. To install pytest with code coverage</p>
<div class="codehilite"><pre><span></span><code>python -m pip install flake8 pytest
pip install pytest-cov
</code></pre></div>

<p>Then, from the base of the git repo:</p>
<div class="codehilite"><pre><span></span><code>pytest --cov kamodo.kamodo --cov kamodo.util --cov plotting kamodo/test_plotting.py kamodo/test_kamodo.py kamodo/test_utils.py
</code></pre></div>

<p>This will generate a test report and coverage of the <code>kamodo</code> module.</p>
<h2 id="generating-docs">Generating Docs<a class="headerlink" href="#generating-docs" title="Permanent link">&para;</a></h2>
<p>Kamodo's documentation site is a good example of how to embed your own plots in your own website.
The documentation site is generated by the <code>mkdocs</code> package with some addons</p>
<ul>
<li>mkdocs - handles site generation and deployment (configured by top-level <code>mkdocs.yaml</code>)</li>
<li>markdown-include - allows for embedding of markdown files (and graph divs) outside the docs folder</li>
<li>python-markdown-math - enables LaTeX rendering</li>
<li>mknotebooks - allows for the embedding of jupyter notebooks</li>
</ul>
<p>All of the above requirements can be installed with this line:</p>
<div class="codehilite"><pre><span></span><code><span class="go">pip install mkdocs python-markdown-math markdown-include mknotebooks</span>
</code></pre></div>

<p>You can then generate the docs and serve locally with</p>
<p><code>mkdocs serve</code></p>
<p>To deploy your own documentation on github-pages:</p>
<p><code>mkdocs gh-deploy</code></p>
<p>This generates a gh-pages branch with the static site files and pushes it to github. Github automatically creates a website url based on that branch.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="about/" class="btn btn-neutral float-right" title="About">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="about/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.2.2
Build Date UTC : 2022-03-11 22:57:48.186838+00:00
-->
